# คู่มือการใช้งาน Portfolio Management

## 🎯 ภาพรวม

ระบบจัดการพอร์ตการลงทุนหุ้นใหม่! ประกอบด้วย 2 แท็บหลัก:
- **🏠 Dashboard** - แสดงภาพรวมพอร์ตทั้งหมด
- **💼 Portfolio** - จัดการหุ้นในพอร์ต (เพิ่ม/แก้ไข/ลบ)

---

## 📋 แท็บ Dashboard (🏠)

### ฟีเจอร์หลัก:

#### 1. **สรุปภาพรวม (Top Metrics)**
- 💰 **มูลค่ารวม** - มูลค่าปัจจุบันของพอร์ตทั้งหมด
- 💵 **ต้นทุนรวม** - เงินที่ลงทุนไป
- 📈 **กำไร/ขาดทุน** - ผลตอบแทน (บาท + %)
- 🎯 **จำนวนหุ้น** - จำนวนหุ้นทั้งหมดในพอร์ต

#### 2. **ตารางรายละเอียด**
แสดงข้อมูลแต่ละหุ้น:
- รหัสหุ้น
- จำนวนหุ้นที่ถือ
- ราคาซื้อเฉลี่ย
- ราคาปัจจุบัน
- ต้นทุนรวม
- มูลค่าปัจจุบัน
- กำไร/ขาดทุน (บาท + %)

#### 3. **กราฟแสดงผล**
- 📊 **กราฟวงกลม (Pie Chart)** - สัดส่วนมูลค่าแต่ละหุ้น
- 📈 **กราฟแท่ง (Bar Chart)** - ผลตอบแทนแต่ละหุ้น (%)

### วิธีใช้งาน:

1. เปิดแท็บ **🏠 Dashboard**
2. ระบบจะดึงราคาปัจจุบันอัตโนมัติ
3. ดูสรุปภาพรวมและรายละเอียดแต่ละหุ้น
4. วิเคราะห์จากกราฟ

**หมายเหตุ:** ถ้ายังไม่มีหุ้นในพอร์ต จะแสดงข้อความ "📭 ยังไม่มีหุ้นในพอร์ต"

---

## 💼 แท็บ Portfolio Management

### ฟีเจอร์หลัก:

#### 1. **เพิ่มหุ้นใหม่ (➕)**

**ข้อมูลที่ต้องกรอก:**
- **รหัสหุ้น** - เช่น AAPL, MSFT, GOOGL (พิมพ์ตัวพิมพ์เล็กหรือใหญ่ก็ได้)
- **จำนวนหุ้น** - ตัวเลขทศนิยมได้ (เช่น 10.5)
- **ราคาซื้อ** - ราคาต่อหุ้น (USD)
- **วันที่ซื้อ** - เลือกจากปฏิทิน (ค่าเริ่มต้น = วันนี้)
- **หมายเหตุ** - บันทึกเพิ่มเติม (ถ้ามี)

**วิธีเพิ่มหุ้น:**
1. กรอกข้อมูลทั้งหมด
2. กดปุ่ม **✅ เพิ่มหุ้น**
3. ระบบจะบันทึกข้อมูล

**กรณีพิเศษ:**
- ถ้าเพิ่มหุ้นที่มีอยู่แล้ว → ระบบจะ**คำนวณราคาซื้อเฉลี่ยใหม่**
  ```
  ราคาเฉลี่ยใหม่ = (จำนวนเดิม × ราคาเดิม + จำนวนใหม่ × ราคาใหม่) / จำนวนรวม
  ```

**ตัวอย่าง:**
```
รหัสหุ้น: AAPL
จำนวน: 10
ราคาซื้อ: $150.00
วันที่: 2026-01-15
หมายเหตุ: ซื้อครั้งแรก
```

#### 2. **แก้ไขข้อมูลหุ้น (💾)**

**วิธีแก้ไข:**
1. คลิกที่หุ้นในส่วน "📋 หุ้นในพอร์ตปัจจุบัน"
2. แก้ไขข้อมูลในฟอร์ม:
   - จำนวนหุ้น
   - ราคาซื้อ
   - หมายเหตุ
3. กดปุ่ม **💾 บันทึกการแก้ไข**

**ข้อมูลที่แสดงใน Expander:**
- วันที่ซื้อ
- ต้นทุนรวม
- หมายเหตุ
- อัพเดทล่าสุด

#### 3. **ลบหุ้น (🗑️)**

**วิธีลบ:**
1. เลือกหุ้นจาก dropdown
2. กดปุ่ม **🗑️ ลบหุ้น**
3. ระบบจะลบหุ้นออกจากพอร์ต

**คำเตือน:** การลบไม่สามารถย้อนกลับได้!

#### 4. **Export Portfolio (📥)**

**ฟีเจอร์:**
- Export ข้อมูลพอร์ตเป็นไฟล์ JSON
- ชื่อไฟล์: `portfolio_YYYYMMDD.json`

**วิธีใช้:**
1. กดปุ่ม **📥 Export Portfolio (JSON)**
2. เลือกตำแหน่งบันทึกไฟล์

**โครงสร้างไฟล์ JSON:**
```json
[
  {
    "symbol": "AAPL",
    "shares": 10.0,
    "buy_price": 150.0,
    "buy_date": "2026-01-15",
    "notes": "ซื้อครั้งแรก",
    "added_at": "2026-01-15 10:30:00",
    "last_updated": "2026-01-15 10:30:00"
  }
]
```

#### 5. **ล้างพอร์ตทั้งหมด (🗑️)**

**วิธีใช้:**
1. กดปุ่ม **🗑️ ล้างพอร์ตทั้งหมด**
2. ยืนยันด้วยปุ่ม **⚠️ ยืนยันการล้างข้อมูล**
3. ระบบจะลบหุ้นทั้งหมด

**คำเตือน:** ไม่สามารถกู้คืนข้อมูลได้!

---

## 💾 ข้อมูลจัดเก็บ

### ไฟล์ข้อมูล:
- **ตำแหน่ง:** `data/portfolio.json`
- **รูปแบบ:** JSON
- **การบันทึก:** อัตโนมัติทุกครั้งที่มีการเปลี่ยนแปลง

### ข้อมูลที่เก็บ:
```python
{
    "symbol": "รหัสหุ้น (ตัวพิมพ์ใหญ่)",
    "shares": "จำนวนหุ้น (float)",
    "buy_price": "ราคาซื้อ (float)",
    "buy_date": "วันที่ซื้อ (YYYY-MM-DD)",
    "notes": "หมายเหตุ (string)",
    "added_at": "วันที่เพิ่มครั้งแรก",
    "last_updated": "วันที่อัพเดทล่าสุด"
}
```

---

## 🔄 การคำนวณ

### 1. **ราคาปัจจุบัน**
- ดึงจาก Yahoo Finance (yfinance)
- ราคาปิดของวันล่าสุด
- ถ้าดึงไม่ได้ → ใช้ราคาซื้อ

### 2. **มูลค่าปัจจุบัน**
```
มูลค่า = จำนวนหุ้น × ราคาปัจจุบัน
```

### 3. **กำไร/ขาดทุน (บาท)**
```
กำไร/ขาดทุน = มูลค่าปัจจุบัน - ต้นทุน
```

### 4. **กำไร/ขาดทุน (%)**
```
% กำไร/ขาดทุน = ((ราคาปัจจุบัน - ราคาซื้อ) / ราคาซื้อ) × 100
```

### 5. **ราคาซื้อเฉลี่ย (กรณีซื้อเพิ่ม)**
```
ราคาเฉลี่ย = (จำนวนเดิม × ราคาเดิม + จำนวนใหม่ × ราคาใหม่) / (จำนวนเดิม + จำนวนใหม่)
```

---

## 📊 ตัวอย่างการใช้งาน

### Scenario 1: เริ่มต้นใช้งาน

**ขั้นตอน:**
1. เปิดแท็บ **💼 Portfolio**
2. เพิ่มหุ้นตัวแรก:
   - รหัส: AAPL
   - จำนวน: 10
   - ราคา: $150
3. เพิ่มหุ้นตัวที่สอง:
   - รหัส: MSFT
   - จำนวน: 5
   - ราคา: $350
4. เปิดแท็บ **🏠 Dashboard** ดูภาพรวม

### Scenario 2: ซื้อเพิ่ม (Average Down/Up)

**สถานการณ์:** มี AAPL 10 หุ้น @ $150 แล้ว ต้องการซื้อเพิ่ม

**ขั้นตอน:**
1. ไปที่แท็บ **💼 Portfolio**
2. เพิ่มหุ้น AAPL อีกครั้ง:
   - จำนวน: 5
   - ราคา: $140
3. ระบบคำนวณราคาเฉลี่ยใหม่:
   ```
   (10 × $150 + 5 × $140) / 15 = $146.67
   ```
4. ผลลัพธ์: AAPL 15 หุ้น @ $146.67

### Scenario 3: แก้ไขข้อมูล

**สถานการณ์:** บันทึกราคาผิด

**ขั้นตอน:**
1. ไปที่แท็บ **💼 Portfolio**
2. คลิกที่หุ้นที่ต้องการแก้ไข
3. แก้ไขราคาในฟอร์ม
4. กด **💾 บันทึกการแก้ไข**

### Scenario 4: Export ข้อมูล

**วัตถุประสงค์:** สำรองข้อมูล หรือ import ไประบบอื่น

**ขั้นตอน:**
1. ไปที่แท็บ **💼 Portfolio**
2. Scroll ลงไปด้านล่าง
3. กดปุ่ม **📥 Export Portfolio (JSON)**
4. บันทึกไฟล์

---

## 🎨 UI/UX Features

### สัญลักษณ์และสี:

- 🟢 = กำไร (สีเขียว)
- 🔴 = ขาดทุน (สีแดง)
- ↗️ = เพิ่มขึ้น
- ↘️ = ลดลง
- 💰 = มูลค่ารวม
- 💵 = ต้นทุน
- 📈 = กำไร/ขาดทุน
- 🎯 = จำนวนหุ้น

### Progress Bar:
- แสดงเมื่อดึงราคาปัจจุบัน
- แสดง % ความคืบหน้า

### Form Validation:
- จำนวนหุ้น ≥ 0.01
- ราคา ≥ 0.01
- รหัสหุ้นต้องไม่ว่าง

---

## ⚠️ ข้อควรระวัง

### 1. **การลบข้อมูล**
- ลบหุ้น → ไม่สามารถกู้คืนได้
- ล้างพอร์ต → ลบทั้งหมดทันที

### 2. **ราคาปัจจุบัน**
- อาจล่าช้า 15-20 นาที (Yahoo Finance delay)
- ถ้าหุ้น delisted → ใช้ราคาซื้อ

### 3. **การคำนวณ**
- ไม่รวมค่าธรรมเนียม/ค่าคอมมิชชั่น
- ไม่รวม dividend

### 4. **ข้อมูลสำรอง**
- แนะนำ Export ข้อมูลเป็นประจำ
- ไฟล์ `data/portfolio.json` อาจสูญหายถ้าลบโดยไม่ตั้งใจ

---

## 🔧 Troubleshooting

### ปัญหา: ไม่มีข้อมูลแสดงใน Dashboard
**สาเหตุ:** ยังไม่มีหุ้นในพอร์ต  
**วิธีแก้:** เพิ่มหุ้นในแท็บ Portfolio ก่อน

### ปัญหา: ราคาปัจจุบันไม่อัพเดท
**สาเหตุ:** ปัญหาเชื่อมต่อ Yahoo Finance  
**วิธีแก้:** รอสักครู่และ refresh หน้าเว็บ

### ปัญหา: เพิ่มหุ้นไม่ได้
**สาเหตุ:** รหัสหุ้นไม่ถูกต้อง  
**วิธีแก้:** ตรวจสอบรหัสหุ้นให้ถูกต้อง (เช่น AAPL, MSFT)

### ปัญหา: ข้อมูลหาย
**สาเหตุ:** ไฟล์ `data/portfolio.json` ถูกลบ  
**วิธีแก้:** Import จากไฟล์ backup (ถ้ามี)

---

## 📝 Tips & Best Practices

### 1. **การบันทึกข้อมูล**
- บันทึกหมายเหตุทุกครั้งที่ซื้อขาย
- ระบุเหตุผลในการซื้อ/ขาย

### 2. **การจัดการพอร์ต**
- Export ข้อมูลสำรองทุกสัปดาห์
- ตรวจสอบ Dashboard เป็นประจำ

### 3. **การวิเคราะห์**
- ใช้กราฟวงกลมดู Diversification
- ใช้กราฟแท่งดูผลตอบแทน

### 4. **การป้อนข้อมูล**
- ใช้วันที่จริง (ไม่ใช่วันนี้เสมอ)
- บันทึกราคาซื้อจริง (รวมค่าธรรมเนียมถ้าต้องการ)

---

## 🚀 Next Steps

หลังจากเพิ่มหุ้นใน Portfolio แล้ว สามารถ:

1. ✅ ดู Dashboard เพื่อวิเคราะห์ภาพรวม
2. ✅ ไปแท็บ "📈 การวิเคราะห์ทั้งหมด" เพื่อดูสัญญาณเทคนิค
3. ✅ ไปแท็บ "💚 สัญญาณซื้อ" เพื่อหาโอกาส
4. ✅ ไปแท็บ "📉 สัญญาณขาย" เพื่อดูสัญญาณเตือน

---

## 📚 Related Documentation

- `README.md` - เอกสารหลักโครงการ
- `USAGE.md` - คู่มือการใช้งานทั่วไป
- `START_HERE.txt` - เริ่มต้นใช้งาน
- `ARCHITECTURE.md` - สถาปัตยกรรมระบบ

---

**เวอร์ชัน:** 1.0  
**อัพเดทล่าสุด:** 26 มกราคม 2026  
**ผู้พัฒนา:** Stock Analyzer Team
